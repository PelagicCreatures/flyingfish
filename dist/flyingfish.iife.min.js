var FlyingFishModule=function(t,e){"use strict";class FlyingFish extends e.Sargasso{constructor(t,e={}){super(t,{watchViewport:!0}),this.triggered=!1}enterViewport(){if(!this.triggered){this.triggered=!0;const t="onmessage = async (e) => {\n\t\t\t\tconst response = await fetch(e.data.url)\n\t\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\t\tconst blob = await response.blob()\n\t\t\t\tself.postMessage({ uid: e.data.uid, blob: blob, contentType: contentType})\n\t\t\t}";this.workerStart("FlyingFish",t);let e=this.element.getAttribute("data-src");e.match(/^http/)||(e=new URL(e,location.href).href),this.workerPostMessage("FlyingFish",{url:e})}}workerOnMessage(t,e){if("FlyingFish"===t){this.blobURL=URL.createObjectURL(e.blob);const frame=()=>{"IMG"===this.element.tagName?this.element.setAttribute("src",this.blobURL):this.element.style.backgroundImage="url("+this.blobURL+")",this.addClass("flying-fish-loaded"),this.sleep()};this.queueFrame(frame)}super.workerOnMessage(t,e)}destroy(){this.blobURL&&URL.revokeObjectURL(this.blobURL),super.destroy()}}return e.utils.registerSargassoClass("FlyingFish",FlyingFish),t.FlyingFish=FlyingFish,Object.defineProperty(t,"__esModule",{value:!0}),t}({},SargassoModule);
//# sourceMappingURL=flyingfish.iife.min.js.map
